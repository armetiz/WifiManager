<head>
  <title>wifiManager</title>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="offset10">{{loginButtons}}</div>
        </div>

        {{#if currentUser}}
            {{> form}}
            {{> freeboxes}}
        {{else}}
            Must login to user this service
        {{/if}}
    </div>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-3801711-7', 'meteor.com');
        ga('send', 'pageview');
    </script>
</body>

<template name="form">
    <h2>Add box</h2>
    <form class="form-inline">
        <input type="text" name="title" placeholder="Title" />
        <input type="text" name="hostname" placeholder="Hostname" />
        <input type="password" name="password" placeholder="Password" />
        <input type="button" class="btn" name="add" value="Add" />
    </form>
</template>

<template name="freeboxes">
    <h2>Boxes</h2>
    <table class="table table-bordered freeboxes">
        <tr>
            <th>Title</th>
            <th>Hostname</th>
            <th>Connection API</th>
            <th>Wifi</th>
            <th>Action</th>
        </tr>
        {{#each freeboxes}}
        <tr class="freebox {{{classFreebox this}}}">
            <td>{{title}}</td>
            <td>{{hostname}}</td>
            <td>{{#if connected}}connected{{else}}not connected: {{latestError}}{{/if}}</td>
            <td>{{#if wifi}}active{{else}}inactive{{/if}}</td>
            <td>
                <input type="button" name="toggle" class="btn btn-small" value="toggle" />
                <input type="button" name="schedule" class="btn btn-small" value="schedule" />
                <input type="button" name="delete" class="btn btn-small" value="delete" />
            </td>
        </tr>
        {{/each}}
    </table>
    
    {{#if selectedFreebox }}
    <div class="scheduler">
        <h3>Hours to enable or disable wifi connection</h3>
        {{#each hours}}
            <button type="button" class="{{{classButtonHour enabled}}} btn hour" data-hour="{{hour}}">{{hour}}</button>
        {{/each}}
        <br />
        <br />
        <div class="legend">
            <h3>Legend</h3>
            <button type="button" class="btn btn-success">active</button>
            <button type="button" class="btn btn-inverse">inactive</button>
        </div>
    </div>
    {{/if}}
</template>